# 13. Управление поведением Cursor


### 13.1. Глобальные и проектные правила

Cursor предоставляет два основных способа настройки поведения AI:

#### Глобальные правила
Глобальные правила применяются ко всем проектам и устанавливаются через настройки Cursor:

1. Откройте настройки Cursor (Ctrl+, или Cmd+,)
2. Перейдите в раздел "General" > "Rules"
3. Введите свои инструкции в текстовое поле
4. Настройки применяются сразу по завершению ввода

Пример глобальных правил:

```
1. Форматирование кода:
   - Использовать 2 пробела для отступов
   - Следовать стилю именования camelCase для переменных
   - Предпочитать однострочные конструкции для коротких выражений

2. Документирование:
   - Комментировать сложные участки кода
   - Генерировать документацию в формате JSDoc/DocBlock
   - Объяснять неочевидные решения

3. Общие принципы:
   - Предпочитать читаемость кода его краткости
   - Придерживаться принципов SOLID
   - Для новой функциональности писать сначала тесты
```

#### Проектные правила
Проектные правила применяются только к конкретному проекту и могут быть реализованы двумя способами:

1. **Файл `.cursorrules`** в корне проекта (традиционный способ)
2. **Директория `.cursor/rules/`** с файлами `.mdc` (рекомендуемый современный подход)

> **Примечание**: Проектные правила имеют приоритет над глобальными правилами, когда они конфликтуют.

### 13.2. Файл `.cursorrules`

Файл `.cursorrules` размещается в корне проекта и содержит инструкции для AI-ассистента, специфичные для данного проекта.

#### Формат и структура

Файл `.cursorrules` содержит текстовые инструкции в свободной форме. Рекомендуется структурировать его следующим образом:

```
# Общая информация о проекте
Это [описание типа проекта] с использованием [технологии, фреймворки]. 
Основная цель проекта - [краткое описание].

# Стиль кода
- Используйте [стандарты форматирования]
- Следуйте [паттернам именования]
- Придерживайтесь [архитектурных принципов]

# Технологический стек
- Frontend: [список технологий]
- Backend: [список технологий] 
- Инфраструктура: [список инструментов]

# Специальные инструкции
- [Индивидуальные требования проекта]
- [Предпочтения команды]
- [Специфические правила]
```

#### Применение файла `.cursorrules`

Для активации файла `.cursorrules`:

1. Создайте файл в корневой директории проекта
2. Убедитесь, что в настройках Cursor включена опция "Include .cursorrules file" в разделе "General" > "Rules for AI"
3. Для большей эффективности рекомендуется открывать файл `.cursorrules` в отдельной вкладке для включения его в контекст генерации кода

> **Примечание**: Некоторые функции Cursor могут не учитывать файл `.cursorrules`, если он не открыт в активной вкладке.

### 13.3. Настройка `.cursorignore`

Файл `.cursorignore` позволяет исключить определенные файлы и директории из контекста, анализируемого AI-ассистентом. Это особенно полезно для:

- Исключения конфиденциальных данных
- Уменьшения "шума" от ненужных файлов
- Ограничения размера контекста для повышения производительности

#### Синтаксис `.cursorignore`

Файл `.cursorignore` использует синтаксис, аналогичный `.gitignore`:

```
# Исключение конфиденциальных файлов
.env
.env.*
secrets.json
credentials.json

# Исключение сгенерированных файлов
node_modules/
dist/
build/
*.min.js

# Исключение больших файлов данных
*.csv
*.json.large
assets/images/

# Исключение специфических директорий
vendor/
third-party/
```

#### Использование `.cursorignore`

1. Создайте файл `.cursorignore` в корне проекта
2. Добавьте шаблоны для файлов и директорий, которые следует исключить
3. Сохраните файл - Cursor автоматически применит эти правила к своему анализу

Эффективное использование `.cursorignore` может существенно повысить релевантность предложений AI-ассистента и защитить конфиденциальные данные от передачи на серверы AI.

### 13.4. Директория `.cursor/rules`

Начиная с последних версий Cursor, рекомендуется использовать систему проектных правил на основе директории `.cursor/rules`. Этот подход предоставляет более гибкий и мощный способ управления поведением AI, чем традиционный файл `.cursorrules`.

#### Преимущества директории `.cursor/rules`

- **Гранулярный контроль**: разные правила для разных частей проекта
- **Шаблоны файлов**: применение правил только к определенным типам файлов
- **Автоматическое применение**: правила применяются автоматически при открытии соответствующих файлов
- **Версионный контроль**: правила можно хранить в репозитории и совместно использовать командой

#### Структура директории `.cursor/rules`

```
project/
  ├── .cursor/
  │    └── rules/
  │         ├── typescript.mdc
  │         ├── react.mdc
  │         ├── python.mdc
  │         └── api.mdc
  ├── src/
  ├── ...
```

#### Создание правил в `.cursor/rules`

Для создания нового правила:

1. Используйте команду "New Cursor Rule" из палитры команд (Ctrl+Shift+P или Cmd+Shift+P)
2. В файле правила укажите:
   - **Описание**: помогает AI выбрать подходящее правило
   - **Глобы (Globs)**: шаблоны файлов, к которым применяется правило (например, `*.tsx`, `src/api/*.js`)
   - **Содержимое правила**: сами инструкции для AI

Пример файла правил `.cursor/rules/typescript.mdc`:

```
# Правило для TypeScript файлов
---
Description: Правила для работы с TypeScript файлами
Globs: *.ts, *.tsx
---

## Стиль кода TypeScript
- Используйте интерфейсы вместо типов для объектов
- Предпочитайте `readonly` для неизменяемых свойств
- Используйте строгую типизацию (strict mode)
- Избегайте использования `any`

## Организация кода
- Группируйте импорты по категориям (npm пакеты, потом локальные импорты)
- Размещайте типы и интерфейсы в отдельных файлах
- Следуйте принципу "один файл - одна ответственность"

@file ../tsconfig.json
```

> **Важно**: Строка `@file ../tsconfig.json` включает содержимое указанного файла в контекст, когда применяется это правило.

### 13.5. Шаблоны правил для различных типов проектов

Ниже приведены краткие примеры шаблонов правил для различных типов проектов. Полные версии шаблонов доступны в отдельных файлах в директории `examples/rules/cursor/`:

#### Шаблон для React проекта

```
# Правила для React проекта
---
Description: Основные правила для разработки на React
Globs: *.jsx, *.tsx
---

Вы эксперт в разработке на React и следуете современным лучшим практикам.

## Общие принципы
- Используйте функциональные компоненты и хуки вместо классовых компонентов
- Придерживайтесь паттерна композиции компонентов
...
```
> 💡 Полный шаблон: [examples/rules/cursor/react.mdc](examples/rules/cursor/react.mdc)

#### Шаблон для Python проекта

```
# Правила для Python проекта
---
Description: Основные правила для разработки на Python
Globs: *.py
---

Вы эксперт в Python и следуете принципам чистого кода и PEP 8.

## Стиль кода
- Следуйте PEP 8 для форматирования кода
- Используйте snake_case для имен переменных и функций
...
```
> 💡 Полный шаблон: [examples/rules/cursor/python.mdc](examples/rules/cursor/python.mdc)

#### Шаблон для бэкенд API (Node.js)

```
# Правила для Node.js API
---
Description: Основные правила для разработки бэкенда на Node.js
Globs: src/api/*.js, src/routes/*.js, src/controllers/*.js
---

Вы эксперт в разработке бэкенд-приложений на Node.js с Express и MongoDB.

## Архитектура
- Следуйте архитектуре MVC или более современной Clean Architecture
- Разделяйте маршруты, контроллеры, сервисы и модели
...
```
> 💡 Полный шаблон: [examples/rules/cursor/nodejs_api.mdc](examples/rules/cursor/nodejs_api.mdc)

#### Шаблон для Flutter проекта

```
# Правила для Flutter проекта
---
Description: Основные правила для разработки мобильных приложений на Flutter
Globs: *.dart
---

Вы эксперт в разработке мобильных приложений на Flutter и Dart.

## Архитектура
- Следуйте архитектуре Clean Architecture или MVVM
- Разделяйте код на слои: представление (UI), бизнес-логика, данные
...
```
> 💡 Полный шаблон: [examples/rules/cursor/flutter.mdc](examples/rules/cursor/flutter.mdc)

#### Шаблоны файлов .cursorrules и .cursorignore

Помимо файлов правил в директории `.cursor/rules`, вы также можете использовать файлы `.cursorrules` и `.cursorignore` для настройки поведения Cursor:

- Шаблон для файла [.cursorrules](examples/rules/cursor/cursorrules_template)
- Шаблон для файла [.cursorignore](examples/rules/cursor/cursorignore_template)

Эти шаблоны можно использовать как отправную точку для создания собственных правил, адаптированных под конкретные проекты и технологии. Помните, что наиболее эффективные правила учитывают специфику вашего проекта и команды.

